<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Rocker Empire</title>

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />

<style>
:root{
  --bg:#0e0e0e; --card:#1a1a1a; --accent:#b30000; --muted:#9aa0a6;
  --radius:14px;
}
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial}
html,body{margin:0;background:var(--bg);color:#fff}
.screen{display:none;padding:16px}
.screen.active{display:block}
h1,h2,h3{text-align:center;margin:10px 0}
button{
  width:100%; padding:14px; margin:8px 0;
  background:var(--accent); color:#fff; border:0; border-radius:var(--radius);
  font-size:16px
}
button.secondary{background:#333}
.card{background:var(--card);padding:14px;border-radius:var(--radius);margin-bottom:12px}
nav{display:flex;gap:6px;justify-content:space-around;background:#111;position:sticky;top:0;padding:6px}
nav button{background:#222;font-size:14px}
.small{color:var(--muted);font-size:13px}
.region{
  border:1px solid #2a2a2a;
  padding:12px;
  border-radius:12px;
  margin-bottom:10px;
}
.owner{font-weight:bold}
</style>
</head>

<body class="touch medium">

<!-- START -->
<section id="start" class="screen active">
  <h1>ğŸï¸ Rocker Empire</h1>
  <div class="card">
    <button onclick="go('chars')">Spielen</button>
    <button class="secondary" onclick="go('settings')">Einstellungen</button>
  </div>
</section>

<!-- CHAR LIST -->
<section id="chars" class="screen">
  <h2>Charaktere</h2>
  <div id="charList"></div>
  <button onclick="go('create')">+ Neuer Charakter</button>
  <button class="secondary" onclick="go('start')">ZurÃ¼ck</button>
</section>

<!-- CREATE -->
<section id="create" class="screen">
  <h2>Neuer Charakter</h2>
  <div class="card">
    <input id="nameInput" placeholder="Name" />
    <select id="ligaInput">
      <option value="4">Liga 4 â€“ EinzelgÃ¤nger</option>
      <option value="3">Liga 3 â€“ Supporter</option>
    </select>
    <button onclick="createChar()">Erstellen</button>
  </div>
</section>

<!-- GAME -->
<section id="game" class="screen">
  <div class="card" id="hud"></div>

  <nav>
    <button onclick="tab('char')">ğŸ‘¤</button>
    <button onclick="tab('club')">ğŸï¸</button>
    <button onclick="tab('economy')">ğŸ’°</button>
    <button onclick="tab('map')">ğŸ—ºï¸</button>
    <button onclick="go('settings')">âš™ï¸</button>
  </nav>

  <div id="char" class="tab"></div>
  <div id="club" class="tab"></div>
  <div id="economy" class="tab"></div>
  <div id="map" class="tab"></div>
</section>

<!-- SETTINGS -->
<section id="settings" class="screen">
  <h2>Einstellungen</h2>
  <button class="secondary" onclick="go('start')">ZurÃ¼ck</button>
</section>

<script>
/* ===== NAV ===== */
function go(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function tab(id){
  document.querySelectorAll('.tab').forEach(t=>t.style.display="none");
  document.getElementById(id).style.display="block";
}

/* ===== STATE ===== */
const SAVE_KEY="re_step3";
let chars=[];
let current=null;

const MCs=["Hells Angels","Bandidos","Gremium","Outlaws"];

const REGIONS=[
  {id:"berlin",name:"Berlin",owner:"Bandidos",economy:90,police:80},
  {id:"brandenburg",name:"Brandenburg",owner:"Hells Angels",economy:60,police:60},
  {id:"sachsen",name:"Sachsen",owner:"Neutral",economy:50,police:55},
  {id:"nrw",name:"NRW",owner:"Gremium",economy:85,police:75}
];

/* ===== SAVE / LOAD ===== */
function save(){
  localStorage.setItem(SAVE_KEY,JSON.stringify({chars,REGIONS}));
}
function load(){
  const d=localStorage.getItem(SAVE_KEY);
  if(!d)return;
  const s=JSON.parse(d);
  chars=s.chars||[];
  if(s.REGIONS){
    s.REGIONS.forEach((r,i)=>REGIONS[i].owner=r.owner);
  }
}

/* ===== CHAR ===== */
function createChar(){
  chars.push({
    name:nameInput.value||"Rider",
    liga:+ligaInput.value,
    money: ligaInput.value==4?500:2000,
    members: ligaInput.value==4?1:6,
    income: ligaInput.value==4?50:120
  });
  save(); renderChars(); go('chars');
}
function renderChars(){
  charList.innerHTML="";
  chars.forEach((c,i)=>{
    const b=document.createElement("button");
    b.textContent=`${c.name} (Liga ${c.liga})`;
    b.onclick=()=>startGame(i);
    charList.appendChild(b);
  });
}
function startGame(i){
  current=i;
  renderGame();
  go('game');
  tab('char');
}

/* ===== GAME UI ===== */
function renderGame(){
  const p=chars[current];
  hud.innerHTML=`<strong>${p.name}</strong><br>ğŸ’¶ ${p.money} â‚¬`;

  char.innerHTML=`
    <div class="card">
      Liga: ${p.liga}<br>
      Mitglieder: ${p.members}
    </div>
  `;

  club.innerHTML=`
    <div class="card">
      Clubstatus: ${p.members>=6?"Prospect-Club":"Einzelperson"}
    </div>
  `;

  economy.innerHTML=`
    <div class="card">
      Einkommen: ${p.income} â‚¬/Minute<br>
      <div class="small">Nur legale Einnahmen</div>
    </div>
  `;

  map.innerHTML="";
  REGIONS.forEach(r=>{
    map.innerHTML+=`
      <div class="region">
        <div class="owner">${r.name}</div>
        Besitzer: ${r.owner}<br>
        Wirtschaft: ${r.economy}%<br>
        Polizei: ${r.police}%
      </div>
    `;
  });
}

/* ===== INCOME LOOP ===== */
setInterval(()=>{
  if(current===null)return;
  chars[current].money+=chars[current].income;
  save(); renderGame();
},60000);

/* ===== INIT ===== */
load(); renderChars();
</script>
</body>
</html>
