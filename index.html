<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rocker Empire</title>

<style>
:root{
  --bg:#0e0e0e; --card:#1a1a1a; --accent:#b30000; --muted:#9aa0a6;
  --radius:14px;
}
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial}
body{margin:0;background:var(--bg);color:#fff}
.screen{display:none;padding:16px}
.screen.active{display:block}
h1,h2{text-align:center;margin:10px 0}
button{width:100%;padding:14px;margin:8px 0;background:var(--accent);color:#fff;border:none;border-radius:var(--radius)}
button.secondary{background:#333}
.card{background:var(--card);padding:14px;border-radius:var(--radius);margin-bottom:12px}
nav{display:flex;gap:6px;justify-content:space-around;background:#111;position:sticky;top:0;padding:6px}
nav button{background:#222;font-size:14px}
.small{color:var(--muted);font-size:13px}
.region{border:1px solid #2a2a2a;padding:12px;border-radius:12px;margin-bottom:10px}
.owner{font-weight:bold}
</style>
</head>

<body>

<section id="start" class="screen active">
  <h1>ğŸï¸ Rocker Empire</h1>
  <button onclick="go('chars')">Spielen</button>
  <button class="secondary" onclick="go('settings')">Einstellungen</button>
</section>

<section id="chars" class="screen">
  <h2>Charaktere</h2>
  <div id="charList"></div>
  <button onclick="go('create')">+ Neuer Charakter</button>
  <button class="secondary" onclick="go('start')">ZurÃ¼ck</button>
</section>

<section id="create" class="screen">
  <h2>Neuer Charakter</h2>
  <div class="card">
    <input id="nameInput" placeholder="Name (nur Liga 4)">
    <select id="ligaInput" onchange="updateCreateUI()">
      <option value="4">Liga 4 â€“ Eigener Weg</option>
      <option value="3">Liga 3 â€“ Supporter-Club</option>
    </select>
    <select id="mcSelect" class="hidden"></select>
    <button onclick="createChar()">Erstellen</button>
  </div>
</section>

<section id="game" class="screen">
  <div class="card" id="hud"></div>

  <nav>
    <button onclick="tab('char')">ğŸ‘¤</button>
    <button onclick="tab('club')">ğŸï¸</button>
    <button onclick="tab('map')">ğŸ—ºï¸</button>
    <button onclick="go('settings')">âš™ï¸</button>
  </nav>

  <div id="char" class="tab"></div>
  <div id="club" class="tab"></div>
  <div id="map" class="tab"></div>
</section>

<section id="settings" class="screen">
  <h2>Einstellungen</h2>
  <button class="secondary" onclick="go('start')">ZurÃ¼ck</button>
</section>

<script>
function go(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function tab(id){
  document.querySelectorAll('.tab').forEach(t=>t.style.display="none");
  document.getElementById(id).style.display="block";
}

const SAVE_KEY="re_step32";

const LIGA3_MCS=[
  {name:"Bulldozer Cottbus", influence:"Hells Angels MC"},
  {name:"Red Devils Support", influence:"Hells Angels MC"},
  {name:"Support 81", influence:"Hells Angels MC"},
  {name:"Free Riders", influence:"Neutral"},
  {name:"Independent Brotherhood", influence:"Neutral"}
];

const REGIONS=[
  {name:"Berlin", owner:"Bulldozer Cottbus", influence:"Hells Angels MC", econ:85, police:75},
  {name:"Brandenburg", owner:"Red Devils Support", influence:"Hells Angels MC", econ:70, police:65},
  {name:"Sachsen", owner:"Free Riders", influence:"Neutral", econ:55, police:55},
  {name:"NRW", owner:"Independent Brotherhood", influence:"Gremium MC", econ:80, police:70}
];

let chars=[], current=null;

function save(){localStorage.setItem(SAVE_KEY,JSON.stringify({chars}))}
function load(){const d=localStorage.getItem(SAVE_KEY);if(d)chars=JSON.parse(d).chars||[]}

function updateCreateUI(){
  const liga=+ligaInput.value;
  mcSelect.classList.toggle("hidden", liga===4);
  nameInput.disabled = liga!==4;

  if(liga===3){
    mcSelect.innerHTML="";
    LIGA3_MCS.forEach(mc=>{
      const o=document.createElement("option");
      o.textContent=mc.name;
      mcSelect.appendChild(o);
    });
  }
}

function createChar(){
  const liga=+ligaInput.value;
  const mc = liga===3 ? mcSelect.value : "EigenstÃ¤ndig";
  const name = liga===4 ? (nameInput.value||"Rider") : mc;

  chars.push({
    liga, name, mc,
    money: liga===4?500:2000,
    members: liga===4?1:6
  });
  save(); renderChars(); go('chars');
}

function renderChars(){
  charList.innerHTML="";
  chars.forEach((c,i)=>{
    const b=document.createElement("button");
    b.textContent=`${c.name} (Liga ${c.liga})`;
    b.onclick=()=>{current=i;renderGame();go('game');tab('char')};
    charList.appendChild(b);
  });
}

function renderGame(){
  const p=chars[current];
  hud.innerHTML=`<strong>${p.name}</strong><br>${p.mc}`;

  char.innerHTML=`Liga: ${p.liga}<br>Mitglieder: ${p.members}`;

  club.innerHTML=`<div class="card">Club: <strong>${p.mc}</strong></div>`;

  map.innerHTML="";
  if(p.liga>=3){
    REGIONS.forEach(r=>{
      map.innerHTML+=`
        <div class="region">
          <div class="owner">${r.name}</div>
          Besitzer: ${r.owner}<br>
          Einfluss: ${r.influence}<br>
          Wirtschaft: ${r.econ}%<br>
          Polizei: ${r.police}%
        </div>`;
    });
  }else{
    map.innerHTML=`<div class="card small">Regionen sind ab Liga 3 sichtbar.</div>`;
  }
}

load(); updateCreateUI(); renderChars();
</script>

</body>
</html>
