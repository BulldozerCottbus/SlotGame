<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rocker Empire</title>

<style>
:root{
  --bg:#0e0e0e;
  --card:#1a1a1a;
  --accent:#b30000;
  --muted:#9aa0a6;
  --radius:14px;
}
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial}
body{margin:0;background:var(--bg);color:#fff}
.screen{display:none;padding:16px}
.screen.active{display:block}
h1,h2,h3{text-align:center;margin:10px 0}
button{width:100%;padding:14px;margin:8px 0;background:var(--accent);color:#fff;border:none;border-radius:var(--radius)}
button.secondary{background:#333}
.card{background:var(--card);padding:14px;border-radius:var(--radius);margin-bottom:12px}
nav{display:flex;gap:6px;justify-content:space-around;background:#111;position:sticky;top:0;padding:6px}
nav button{background:#222;font-size:14px}
.small{color:var(--muted);font-size:13px}
.region{border:1px solid #2a2a2a;padding:12px;border-radius:12px;margin-bottom:10px}
.locked{opacity:.5}
</style>
</head>

<body>

<!-- START -->
<section id="start" class="screen active">
  <h1>ğŸï¸ Rocker Empire</h1>
  <button onclick="go('chars')">Spielen</button>
  <button class="secondary" onclick="go('settings')">Einstellungen</button>
</section>

<!-- CHARAKTERE -->
<section id="chars" class="screen">
  <h2>Charaktere</h2>
  <div id="charList"></div>
  <button onclick="go('create')">+ Neuer Charakter</button>
  <button class="secondary" onclick="go('start')">ZurÃ¼ck</button>
</section>

<!-- CREATE -->
<section id="create" class="screen">
  <h2>Neuer Charakter</h2>
  <div class="card">
    <input id="nameInput" placeholder="Name (nur Liga 4)">
    <select id="ligaInput" onchange="updateCreateUI()">
      <option value="4">Liga 4 â€“ Eigener Weg</option>
      <option value="3">Liga 3 â€“ Supporter-Club</option>
    </select>
    <select id="mcSelect" class="hidden"></select>
    <button onclick="createChar()">Erstellen</button>
  </div>
</section>

<!-- GAME -->
<section id="game" class="screen">
  <div class="card" id="hud"></div>

  <nav>
    <button onclick="tab('char')">ğŸ‘¤</button>
    <button onclick="tab('map')">ğŸ—ºï¸</button>
    <button onclick="tab('market')">ğŸª</button>
    <button onclick="tab('war')">âš”ï¸</button>
    <button onclick="go('settings')">âš™ï¸</button>
  </nav>

  <div id="char" class="tab"></div>
  <div id="map" class="tab"></div>
  <div id="market" class="tab"></div>
  <div id="war" class="tab"></div>
</section>

<!-- SETTINGS -->
<section id="settings" class="screen">
  <h2>Einstellungen</h2>
  <button class="secondary" onclick="go('start')">ZurÃ¼ck</button>
</section>

<script>
/* ===== NAV ===== */
function go(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function tab(id){
  document.querySelectorAll('.tab').forEach(t=>t.style.display="none");
  document.getElementById(id).style.display="block";
}

/* ===== DATA ===== */
const SAVE_KEY="rocker_empire_step5";

const LIGA3_MCS=[
  "Bulldozer Cottbus","Red Devils Support","Support 81","Free Riders","Independent Brotherhood"
];

const REGIONS=[
  {name:"Berlin", owner:"Hells Angels MC"},
  {name:"Hamburg", owner:"Bandidos MC"},
  {name:"NRW", owner:"Outlaws MC"},
  {name:"Bayern", owner:"Pagans MC"},
  {name:"Sachsen", owner:"Sons of Silence"}
];

let chars=[], current=null;

/* ===== SAVE ===== */
function save(){localStorage.setItem(SAVE_KEY,JSON.stringify(chars))}
function load(){const d=localStorage.getItem(SAVE_KEY);if(d)chars=JSON.parse(d)}

/* ===== CREATE ===== */
function updateCreateUI(){
  const liga=+ligaInput.value;
  nameInput.disabled = liga!==4;
  mcSelect.classList.toggle("hidden", liga===4);
  if(liga===3){
    mcSelect.innerHTML="";
    LIGA3_MCS.forEach(m=>mcSelect.innerHTML+=`<option>${m}</option>`);
  }
}
function createChar(){
  const liga=+ligaInput.value;
  chars.push({
    liga,
    name: liga===4?(nameInput.value||"Rider"):mcSelect.value,
    mc: liga===4?"EigenstÃ¤ndig":mcSelect.value,
    members: liga===4?1:6,
    money: liga===4?500:2000,
    influence: liga>=3?40:0,
    weapons: 0,
    chapter: false
  });
  save(); renderChars(); go('chars');
}

/* ===== LIST ===== */
function renderChars(){
  charList.innerHTML="";
  chars.forEach((c,i)=>{
    charList.innerHTML+=`<button onclick="startGame(${i})">${c.name} (Liga ${c.liga})</button>`;
  });
}

/* ===== GAME ===== */
function startGame(i){
  current=i;
  renderAll();
  go('game'); tab('char');
}

function renderAll(){
  const p=chars[current];
  hud.innerHTML=`
    <strong>${p.name}</strong><br>
    ${p.mc}<br>
    ğŸ’¶ ${p.money} â‚¬ | ğŸ‘¥ ${p.members} | ğŸ”« ${p.weapons}
  `;

  char.innerHTML=`
    <div class="card">
      Liga ${p.liga}<br>
      Einfluss ${p.influence}%<br>
      Chapter: ${p.chapter?"Ja":"Nein"}
    </div>
  `;

  map.innerHTML="";
  if(p.liga>=3){
    REGIONS.forEach((r,i)=>{
      map.innerHTML+=`
        <div class="region">
          <strong>${r.name}</strong><br>
          Besitzer: ${r.owner}<br>
          <button onclick="attack(${i})">Angreifen</button>
        </div>
      `;
    });
  }

  market.innerHTML=`
    <div class="card ${p.influence<50?'locked':''}">
      ğŸ”« Waffen kaufen (1000 â‚¬ / StÃ¼ck)<br>
      <button onclick="buyWeapon()">Kaufen</button>
    </div>
  `;

  war.innerHTML=`
    <div class="card">
      Chapter kaufen (2000 â‚¬)<br>
      <button onclick="buyChapter()">Chapter erÃ¶ffnen</button>
    </div>
  `;
}

/* ===== ACTIONS ===== */
function buyWeapon(){
  const p=chars[current];
  if(p.influence<50) return alert("Kein Zugriff");
  if(p.money<1000) return alert("Zu wenig Geld");
  p.money-=1000;
  p.weapons++;
  save(); renderAll();
}

function buyChapter(){
  const p=chars[current];
  if(p.liga<3) return alert("Nicht verfÃ¼gbar");
  if(p.members<6) return alert("Zu wenig Mitglieder");
  if(p.money<2000) return alert("Zu wenig Geld");
  p.money-=2000;
  p.chapter=true;
  save(); renderAll();
}

function attack(i){
  const p=chars[current];
  if(!p.chapter) return alert("Kein Chapter");
  if(p.weapons<=0) return alert("Keine Waffen");
  p.weapons--;

  if(Math.random()<0.6){
    p.influence=Math.min(100,p.influence+15);
    alert("Angriff erfolgreich â€“ Einfluss steigt");
  }else{
    p.influence=Math.max(0,p.influence-10);
    p.members=Math.max(1,p.members-1);
    alert("Angriff gescheitert");
  }
  save(); renderAll();
}

/* ===== INIT ===== */
load(); renderChars(); updateCreateUI();
</script>

</body>
</html>
