<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rocker Empire</title>

<style>
:root{
  --bg:#0b0b0b;
  --panel:#151515;
  --card:#1e1e1e;
  --accent:#b30000;
  --good:#2ecc71;
  --warn:#f1c40f;
  --bad:#e74c3c;
  --muted:#9aa0a6;
}
*{box-sizing:border-box;font-family:system-ui,-apple-system,BlinkMacSystemFont}
body{margin:0;background:var(--bg);color:#fff;overflow:hidden}

/* SCREENS */
.screen{display:none;height:100vh;width:100vw}
.screen.active{display:flex;flex-direction:column}

/* HUD */
#hud{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:8px 12px;
  background:#111;
  border-bottom:1px solid #222;
  font-size:14px;
}
.hud-heat.low{color:var(--good)}
.hud-heat.mid{color:var(--warn)}
.hud-heat.high{color:var(--bad);animation:pulse 1s infinite}
@keyframes pulse{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}

/* CONTENT */
#content{flex:1;position:relative;overflow:hidden}
.panel{
  position:absolute;
  inset:0;
  background:var(--panel);
  padding:14px;
  overflow-y:auto;
  transform:translateX(100%);
  transition:transform .3s ease;
}
.panel.active{transform:translateX(0)}

/* BOTTOM BAR */
#bottomBar{
  display:flex;
  justify-content:space-around;
  background:#111;
  border-top:1px solid #222;
  padding:6px 0;
}
#bottomBar button{
  background:none;
  border:none;
  color:#888;
  font-size:12px;
  padding:6px 10px;
}
#bottomBar button.active{
  color:#fff;
  border-bottom:2px solid var(--accent);
}

/* UI */
button{
  background:var(--accent);
  border:none;
  color:#fff;
  padding:10px;
  border-radius:8px;
  margin-top:6px;
}
button.secondary{background:#333}
.card{
  background:var(--card);
  border-radius:12px;
  padding:14px;
  margin-bottom:12px;
}
.region{
  border:1px solid #333;
  border-radius:10px;
  padding:10px;
  margin-bottom:10px;
}
.center{
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  height:100%;
}

/* CREATE */
.create-card{width:100%;max-width:320px}
.create-card input,
.create-card select{
  width:100%;
  padding:8px 10px;
  border-radius:8px;
  border:none;
  background:#111;
  color:#fff;
  margin-bottom:10px;
}
</style>
</head>

<body>

<!-- START -->
<section id="start" class="screen active">
  <div class="center">
    <h1>ğŸï¸ ROCKER EMPIRE</h1>
    <button onclick="go('chars')">SPIELEN</button>
  </div>
</section>

<!-- CHARACTERS -->
<section id="chars" class="screen">
  <div class="center">
    <h2>Charaktere</h2>
    <div id="charList"></div>
    <button onclick="go('create')">+ Neuer Charakter</button>
    <button class="secondary" onclick="go('start')">ZurÃ¼ck</button>
  </div>
</section>

<!-- CREATE -->
<section id="create" class="screen">
  <div class="center">
    <h2>Neuer Charakter</h2>
    <div class="card create-card">
      <input id="nameInput" placeholder="Name (Liga 4)">
      <select id="ligaInput" onchange="updateCreateUI()">
        <option value="4">Liga 4 â€“ EigenstÃ¤ndig</option>
        <option value="3">Liga 3 â€“ Supporter</option>
      </select>
      <select id="mcSelect" style="display:none"></select>
      <button onclick="createChar()">Erstellen</button>
      <button class="secondary" onclick="go('chars')">Abbrechen</button>
    </div>
  </div>
</section>

<!-- GAME -->
<section id="game" class="screen">
  <div id="hud">
    <div>ğŸ’¶ <span id="hudMoney">0</span></div>
    <div>ğŸ‘¥ <span id="hudMembers">0</span></div>
    <div>ğŸ”« <span id="hudWeapons">0</span></div>
    <div id="hudHeat" class="hud-heat low">Heat 0%</div>
  </div>

  <div id="content">
    <div id="panel-char" class="panel active"></div>
    <div id="panel-map" class="panel"></div>
    <div id="panel-shop" class="panel"></div>
    <div id="panel-police" class="panel"></div>
  </div>

  <div id="bottomBar">
    <button id="btn-char" class="active" onclick="openPanel('char')">ğŸ‘¤</button>
    <button id="btn-map" onclick="openPanel('map')">ğŸ—ºï¸</button>
    <button id="btn-shop" onclick="openPanel('shop')">ğŸª</button>
    <button id="btn-police" onclick="openPanel('police')">ğŸš“</button>
  </div>
</section>

<script>
/* ======= TEIL 1 ENDET HIER ======= */
/* NICHT SCHLIESSEN! WEITER MIT TEIL 2 */
/* ================= TEIL 2: DATEN ================= */

const SAVE_KEY = "rocker_empire_master_full";

/* -------- MCs & LoyalitÃ¤t -------- */
const MCs = {
  "Hells Angels MC": { loyalty: 40 },
  "Bandidos MC": { loyalty: 35 },
  "Outlaws MC": { loyalty: 30 },
  "Pagans MC": { loyalty: 30 },
  "Sons of Silence": { loyalty: 25 }
};

/* -------- Regionen (alle sichtbar) -------- */
const REGIONS = [
  { name: "Berlin", owner: "Hells Angels MC" },
  { name: "Brandenburg", owner: "Hells Angels MC" },
  { name: "Sachsen", owner: "Hells Angels MC" },

  { name: "Hamburg", owner: "Bandidos MC" },
  { name: "Niedersachsen", owner: "Bandidos MC" },
  { name: "Schleswig-Holstein", owner: "Bandidos MC" },

  { name: "NRW", owner: "Outlaws MC" },
  { name: "Hessen", owner: "Outlaws MC" },

  { name: "Bayern", owner: "Pagans MC" },
  { name: "Baden-WÃ¼rttemberg", owner: "Pagans MC" },

  { name: "ThÃ¼ringen", owner: "Sons of Silence" },
  { name: "Sachsen-Anhalt", owner: "Sons of Silence" },
  { name: "Mecklenburg-Vorpommern", owner: "Sons of Silence" }
];

/* -------- Liga-3 Supporter-MCs -------- */
const LIGA3_MCS = [
  "Bulldozer Cottbus",
  "Red Devils Support",
  "Support 81",
  "Free Riders",
  "Independent Brotherhood"
];

/* -------- Fahrzeuge -------- */
const VEHICLES = [
  {
    name: "Schrottbike",
    price: 5000,
    speed: 20,
    power: 15,
    safety: 10,
    freedom: 25
  },
  {
    name: "Street Cruiser",
    price: 25000,
    speed: 40,
    power: 35,
    safety: 30,
    freedom: 45
  },
  {
    name: "Club Chopper",
    price: 60000,
    speed: 60,
    power: 55,
    safety: 50,
    freedom: 65
  },
  {
    name: "Elite Road King",
    price: 100000,
    speed: 80,
    power: 75,
    safety: 70,
    freedom: 85
  }
];

/* -------- Legale Shop-Items -------- */
const LEGAL_ITEMS = [
  { name: "Kleidung", price: 200, effect: "stability" },
  { name: "Essen", price: 100, effect: "stability" },
  { name: "GetrÃ¤nke", price: 80, effect: "stability" },
  { name: "Verbandszeug", price: 150, effect: "safety" }
];

/* -------- Mitglieder -------- */
const MEMBERS = [
  { name: "Prospect", price: 500, risk: 5 },
  { name: "Club-Mitglied", price: 1500, risk: 10 },
  { name: "Fremder MC", price: 800, risk: 25 }
];

/* -------- Initialer Spielstate -------- */
let state = {
  chars: []
};

let current = null;

/* ================= TEIL 2 ENDET HIER ================= */
/* WEITER MIT TEIL 3 â€“ LOGIK & SPIELFUNKTIONEN */
/* ================= TEIL 3: LOGIK ================= */

/* ---------- Navigation ---------- */
function go(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
function openPanel(name){
  document.querySelectorAll(".panel").forEach(p=>p.classList.remove("active"));
  document.getElementById("panel-"+name).classList.add("active");
  document.querySelectorAll("#bottomBar button").forEach(b=>b.classList.remove("active"));
  document.getElementById("btn-"+name).classList.add("active");
}

/* ---------- Save / Load ---------- */
function save(){
  localStorage.setItem(SAVE_KEY, JSON.stringify(state));
}
function load(){
  const d = localStorage.getItem(SAVE_KEY);
  if(d) state = JSON.parse(d);
}

/* ---------- Charakter-Erstellung ---------- */
function updateCreateUI(){
  mcSelect.style.display = ligaInput.value == 3 ? "block" : "none";
  if(ligaInput.value == 3){
    mcSelect.innerHTML = "";
    LIGA3_MCS.forEach(m => mcSelect.innerHTML += `<option>${m}</option>`);
  }
}
function createChar(){
  const liga = +ligaInput.value;
  state.chars.push({
    liga,
    name: liga === 4 ? (nameInput.value || "Rider") : mcSelect.value,
    mc: liga === 4 ? "EigenstÃ¤ndig" : mcSelect.value,
    money: liga === 4 ? 500 : 2000,
    members: liga === 4 ? 1 : 6,
    influence: liga === 4 ? 0 : 20,
    weapons: 0,
    weed: 0,
    heat: 0,
    vehicle: null
  });
  save();
  renderChars();
  go("chars");
}

/* ---------- Charakter-Liste ---------- */
function renderChars(){
  charList.innerHTML = "";
  state.chars.forEach((c,i)=>{
    charList.innerHTML += `<button onclick="startGame(${i})">${c.name} (Liga ${c.liga})</button>`;
  });
}

/* ---------- Spielstart ---------- */
function startGame(i){
  current = i;
  go("game");
  renderGame();
}

/* ---------- HUD & Panels ---------- */
function renderGame(){
  const p = state.chars[current];

  hudMoney.textContent = p.money;
  hudMembers.textContent = p.members;
  hudWeapons.textContent = p.weapons;
  hudHeat.textContent = "Heat " + p.heat + "%";
  hudHeat.className = "hud-heat " + (p.heat<40?"low":p.heat<70?"mid":"high");

  /* Charakter */
  document.getElementById("panel-char").innerHTML = `
    <div class="card">
      <strong>${p.name}</strong><br>
      Liga ${p.liga}<br>
      Club: ${p.mc}<br>
      Einfluss: ${p.influence}%<br>
      Fahrzeug: ${p.vehicle ? p.vehicle.name : "Keins"}
    </div>
  `;

  /* Map */
  document.getElementById("panel-map").innerHTML = REGIONS.map(r=>`
    <div class="region">
      <strong>${r.name}</strong><br>
      Besitzer: ${r.owner}<br>
      LoyalitÃ¤t: ${MCs[r.owner].loyalty}%
    </div>
  `).join("");

  /* Shop */
  document.getElementById("panel-shop").innerHTML = `
    <div class="card">
      <h3>Legale Items</h3>
      ${LEGAL_ITEMS.map(i=>`
        <button onclick="buyLegal(${i.price})">${i.name} â€“ ${i.price}â‚¬</button>
      `).join("")}
    </div>

    <div class="card">
      <h3>Mitglieder</h3>
      ${MEMBERS.map(m=>`
        <button onclick="hireMember(${m.price},${m.risk})">${m.name} â€“ ${m.price}â‚¬</button>
      `).join("")}
    </div>

    <div class="card">
      <h3>Fahrzeuge</h3>
      ${VEHICLES.map(v=>`
        <button onclick="buyVehicle(${VEHICLES.indexOf(v)})">
          ${v.name} â€“ ${v.price}â‚¬<br>
          âš¡${v.speed}% ğŸ’ª${v.power}% ğŸ›¡ï¸${v.safety}% ğŸ•Šï¸${v.freedom}%
        </button>
      `).join("")}
    </div>

    <div class="card">
      <h3>Illegales</h3>
      ${Object.keys(MCs).map(mc=>`
        <button onclick="buyWeapon('${mc}')">ğŸ”« Waffe von ${mc}</button>
      `).join("")}
    </div>
  `;

  /* Polizei */
  document.getElementById("panel-police").innerHTML = `
    <div class="card">
      Heat: ${p.heat}%<br>
      <button onclick="bribePolice()">ğŸ’¸ Polizei schmieren</button>
    </div>
  `;
}

/* ---------- Shop-Logik ---------- */
function buyLegal(price){
  const p = state.chars[current];
  if(p.money < price) return;
  p.money -= price;
  p.heat = Math.max(0, p.heat - 2);
  save(); renderGame();
}

function hireMember(price,risk){
  const p = state.chars[current];
  if(p.money < price) return;
  p.money -= price;
  p.members++;
  p.heat += risk;
  save(); renderGame();
}

function buyVehicle(index){
  const p = state.chars[current];
  const v = VEHICLES[index];
  if(p.money < v.price) return;
  p.money -= v.price;
  p.vehicle = v;
  save(); renderGame();
}

function buyWeapon(mc){
  const p = state.chars[current];
  if(MCs[mc].loyalty < 50) return alert("Kein Vertrauen von "+mc);
  if(p.money < 1000) return;
  p.money -= 1000;
  p.weapons++;
  p.heat += 8;
  MCs[mc].loyalty += 2;
  save(); renderGame();
}

/* ---------- Polizei ---------- */
function bribePolice(){
  const p = state.chars[current];
  const cost = p.liga === 4 ? 1000 : 3000;
  if(p.money < cost) return;
  p.money -= cost;
  p.heat = Math.max(0, p.heat - 25);
  save(); renderGame();
}

/* ---------- INIT ---------- */
load();
renderChars();

/* ================= TEIL 3 ENDET HIER ================= */
</script>
</body>
</html>
